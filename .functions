#!/usr/bin/env bash

# Test function
function t() {
  if [[ "$PWD" == "$HOME" ]]; then
    cd ~/Tests
  elif [[ "$PWD" =~ "go/src" ]]; then
    go test
  elif [[ -r "package.json" ]]; then
    npm test $@
  else
    echo "test command"  
  fi
}

# Git clone function
function gclone() {
  if ! command -v gh &> /dev/null
  then
    echo "gh command not found"
    exit
  fi

  repo=$1
  repo=${repo/#https:\/\/github.com\//}
  dir=$2

  if [[ -z $dir ]]; then
    dir=${repo/\//@}
  fi

  gh repo clone $repo $dir
}

# Fuck the company naming conventions
# Example: feature-YYYYmmdd-name
function git-feature() {
  date_format=`date -u +"%Y%m%d"`
  branch="feature-$date_format-$1"
  git checkout -b $branch
}
